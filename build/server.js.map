{"version":3,"sources":["webpack:///webpack/bootstrap 28e892ab015f6581cb0f","webpack:///./src/server/index.js","webpack:///external \"express\"","webpack:///./src/server/data/schema.js","webpack:///external \"graphql\"","webpack:///external \"graphql-relay\"","webpack:///external \"express-graphql\"","webpack:///external \"phantom\""],"names":[],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 28e892ab015f6581cb0f\n **/","import express from 'express';\nimport { Schema } from './data/schema';\nimport graphQLHTTP from 'express-graphql';\nimport phantom from 'phantom';\n\nconst app = express();\n\n// https://github.com/relayjs/relay-starter-kit/pull/20/files\napp.use(function(req, res, next) {\n  var oneof = false;\n  if(req.headers.origin &&\n     req.headers.origin.match(/^https?:[/][/]localhost/)) {\n    res.header('Access-Control-Allow-Origin', req.headers.origin);\n    oneof = true;\n  }\n  if(req.headers['access-control-request-method']) {\n    res.header(\n      'Access-Control-Allow-Methods',\n      req.headers['access-control-request-method']\n    );\n    oneof = true;\n  }\n  if(req.headers['access-control-request-headers']) {\n    res.header(\n      'Access-Control-Allow-Headers',\n      req.headers['access-control-request-headers']\n    );\n    oneof = true;\n  }\n  if(oneof) {\n    res.header('Access-Control-Max-Age', 60 * 60 * 24 * 365);\n  }\n\n  // Intercept OPTIONS method.\n  if (oneof && req.method == 'OPTIONS') {\n    res.sendStatus(200);\n  } else {\n    next();\n  }\n});\n\n// https://github.com/ariya/phantomjs/wiki/API-Reference-WebPage\n// https://www.npmjs.com/package/phantom\napp.use('/rendering-in-server', function(req, res) {\n\n  /**\n   * Running a Headless Browser on Heroku\n   * - https://discussion.heroku.com/t/running-a-headless-browser-on-heroku/97/2\n   * - https://github.com/stomita/heroku-buildpack-phantomjs\n   */\n\n  phantom.create(function (phantom_process) {\n    phantom_process.createPage(function (page) {\n      // https://github.com/ariya/phantomjs/wiki/API-Reference-WebPage#webpage-onCallback\n      page.set('onCallback', function(data) {\n        data && data.done && page.evaluate(function () {\n          return document.getElementById('container').outerHTML;\n        }, function (result) {\n          res.send( result );\n          phantom_process.exit();\n        });\n      })\n      page.open(\"https://relay-hacking.herokuapp.com/\");\n    });\n  });\n\n});\n\napp.use('/', graphQLHTTP({ schema: Schema, pretty: true }));\napp.listen( process.env.PORT || 8080, (err) => {\n  if (err)\n    return console.error(err);\n  console.log(`GraphQL Server is now running on localhost:${process.env.PORT || 8080}`);\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/index.js\n **/","module.exports = require(\"express\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express\"\n ** module id = 1\n ** module chunks = 0\n **/","import {\n  GraphQLObjectType,\n  GraphQLInt,\n  GraphQLString,\n  GraphQLSchema\n} from 'graphql';\n\nimport {\n  fromGlobalId,\n  globalIdField,\n  nodeDefinitions\n} from 'graphql-relay';\n\nconst example = {\n  id: 1,\n  text: 'Hello World'\n};\n\n/**\n * The first argument defines the way to resolve an ID to its object.\n * The second argument defines the way to resolve a node object to its GraphQL type.\n */\nvar { nodeInterface, nodeField } = nodeDefinitions(\n  (globalId) => {\n    let { id, type } = fromGlobalId(globalId);\n    if (type === 'Example')\n      return example;\n    return null;\n  },\n  (obj) => {\n    return exampleType;\n  }\n);\n\nvar exampleType = new GraphQLObjectType({\n  name: 'Example',\n  fields: () => ({\n    id: globalIdField('Example'),\n    text: {\n      type: GraphQLString,\n      description: 'Hello World'\n    }\n  }),\n  interfaces: [ nodeInterface ]\n});\n\nvar queryType = new GraphQLObjectType({\n  name: 'Query',\n  fields: () => ({\n    node: nodeField,\n    example: {\n      type: exampleType,\n      resolve: () => example\n    }\n  })\n});\n\nexport var Schema = new GraphQLSchema({\n  query: queryType\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/server/data/schema.js\n **/","module.exports = require(\"graphql\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"graphql\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"graphql-relay\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"graphql-relay\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"express-graphql\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"express-graphql\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"phantom\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"phantom\"\n ** module id = 6\n ** module chunks = 0\n **/"],"sourceRoot":""}